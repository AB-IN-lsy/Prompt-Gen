###
 # @Author: NEFU AB-IN
 # @Date: 2025-10-08 18:00:51
 # @FilePath: \electron-go-app\.env.example
###
# 复制为 .env.local 后填写真实值，服务启动时会自动加载。

# === 运行模式（online / local） ===
APP_MODE=online
VITE_DEFAULT_RUNTIME_MODE=online
# APP_ENABLE_DEVTOOLS 控制是否在打包版本中开放开发者工具（true/false）
APP_ENABLE_DEVTOOLS=false

# 本地模式下的 SQLite 数据库路径（支持 ~ 前缀）
LOCAL_SQLITE_PATH=~/.promptgen/promptgen-local.db
# 本地模式默认用户配置
LOCAL_USER_ID=1
LOCAL_USER_USERNAME=离线用户
LOCAL_USER_EMAIL=offline@localhost
LOCAL_USER_ADMIN=false

# === Nacos 连接配置 ===
# Nacos 服务地址，格式 ip:port，例如 10.0.0.1:8848
NACOS_ENDPOINT=
# Nacos 登录账号与密码
NACOS_USERNAME=
NACOS_PASSWORD=
# 若部署有自定义协议/上下文路径，可在此覆盖
NACOS_SCHEME=http
NACOS_CONTEXT_PATH=
NACOS_GROUP=DEFAULT_GROUP
NACOS_NAMESPACE=public

# === 后端运行时机密 ===
# HTTP 服务监听端口，默认 9090
SERVER_PORT=9090
# JWT 签名密钥，生产环境务必改成随机字符串
JWT_SECRET=
# 访问令牌有效期（例如 15m）
JWT_ACCESS_TTL=15m
# 刷新令牌有效期（例如 168h）
JWT_REFRESH_TTL=168h
# 用于加密模型凭据 API Key 的主密钥（32 字节 Base64）
MODEL_CREDENTIAL_MASTER_KEY=

# === MySQL 连接（必填） ===
MYSQL_HOST=
MYSQL_PORT=3306
MYSQL_USERNAME=
MYSQL_PASSWORD=
MYSQL_DATABASE=prompt
MYSQL_PARAMS=charset=utf8mb4&parseTime=true&loc=Local

# === Redis 连接（启用验证码/限流等功能时必填） ===
REDIS_ENDPOINT=
REDIS_PASSWORD=
REDIS_DB=0

# === 验证码设置（CAPTCHA_ENABLED=1 时生效） ===
CAPTCHA_ENABLED=0
CAPTCHA_PREFIX=captcha
CAPTCHA_TTL=5m
CAPTCHA_WIDTH=240
CAPTCHA_HEIGHT=80
CAPTCHA_LENGTH=5
CAPTCHA_MAX_SKEW=0.7
CAPTCHA_DOT_COUNT=80
CAPTCHA_RATE_LIMIT_PER_MIN=10
CAPTCHA_RATE_LIMIT_WINDOW=1m
# 可选：从 Nacos 中读取验证码配置（JSON），若启用请同时设置 NACOS_*
CAPTCHA_CONFIG_DATA_ID=
CAPTCHA_CONFIG_GROUP=DEFAULT_GROUP
CAPTCHA_CONFIG_POLL_INTERVAL=30s

# === 集成测试辅助参数（仅在 go test -tags integration 时需要） ===
# Nacos 测试用配置入口
NACOS_TEST_DATA_ID=
NACOS_TEST_GROUP=
# 直接指定 MySQL 连接，填后会跳过 Nacos 加载
MYSQL_TEST_HOST=
MYSQL_TEST_USER=
MYSQL_TEST_PASS=
MYSQL_TEST_DB=
MYSQL_TEST_PARAMS=

# === 验证码与邮箱验证限流 ===
EMAIL_VERIFICATION_LIMIT=5
EMAIL_VERIFICATION_WINDOW=1h

# === Prompt 工作台限流（可选，不配置时使用默认值） ===
PROMPT_INTERPRET_LIMIT=3
PROMPT_INTERPRET_WINDOW=1m
PROMPT_GENERATE_LIMIT=3
PROMPT_GENERATE_WINDOW=1m
# Prompt 正/负关键词数量上限，默认与前端保持一致为 10
PROMPT_KEYWORD_LIMIT=10
# Prompt 关键词最大长度（按字符计），默认 32
PROMPT_KEYWORD_MAX_LENGTH=32
# Prompt 标签数量上限，默认 3 个
PROMPT_TAG_LIMIT=3
# Prompt 标签最大长度（按字符计），默认 5
PROMPT_TAG_MAX_LENGTH=5
# “我的 Prompt”列表默认每页数量
PROMPT_LIST_PAGE_SIZE=10
# “我的 Prompt”列表单页最大数量（用于硬限制前端传入值）
PROMPT_LIST_MAX_PAGE_SIZE=100
# 是否启用 MySQL FULLTEXT 搜索（1 开启、0 关闭，默认 0）
PROMPT_USE_FULLTEXT=0
# Prompt 本地导出保存目录（相对路径会自动转换为绝对路径）
PROMPT_EXPORT_DIR=data/exports
# Prompt 历史版本保留数量，超出后自动清理最旧版本
PROMPT_VERSION_KEEP_LIMIT=5
# Prompt 导入时每批处理的最大记录数
PROMPT_IMPORT_BATCH_SIZE=20

# === IP 防护配置（可选） ===
# 是否启用 IP Guard（1/true 开启，0/false 关闭）
IP_GUARD_ENABLED=1
# 窗口内允许的最大请求数，超出会计一次“违规”
IP_GUARD_MAX_REQUESTS=120
# 统计窗口长度
IP_GUARD_WINDOW=30s
# 在指定窗口内累计多少次违规将封禁该 IP
IP_GUARD_STRIKE_LIMIT=5
# 统计违规次数的窗口长度
IP_GUARD_STRIKE_WINDOW=10m
# 被封禁后黑名单的持续时间
IP_GUARD_BAN_TTL=30m
# 蜜罐接口的相对路径（挂载在 /api 下，无需带前导 /）
IP_GUARD_HONEYPOT_PATH=__internal__/trace
# 管理端查询黑名单时 Redis SCAN 的单批提示数量
IP_GUARD_ADMIN_SCAN_COUNT=100
# 管理端接口返回的最大黑名单条目数
IP_GUARD_ADMIN_MAX_ENTRIES=200

# === Vite 前端构建参数（可选） ===
# 前端关键词上限
VITE_PROMPT_KEYWORD_LIMIT=10
# 前端关键词最大长度，需与后端一致
VITE_PROMPT_KEYWORD_MAX_LENGTH=32
# 前端标签数量上限，默认与后端保持一致
VITE_PROMPT_TAG_LIMIT=3
# 前端标签最大长度，默认与后端保持一致
VITE_PROMPT_TAG_MAX_LENGTH=5
# 前端“我的 Prompt”列表关键词每行最多多少个
VITE_KEYWORD_ROW_LIMIT=3
# 前端默认关键词权重
VITE_DEFAULT_KEYWORD_WEIGHT=5
# 前端请求超时时间（毫秒），默认 60000
VITE_API_REQUEST_TIMEOUT_MS=60000
# AI 生成最短加载时间（毫秒），用于控制提示加载动画时长
VITE_AI_GENERATE_MIN_DURATION_MS=2000
# Prompt 工作台自动保存延迟（毫秒）
VITE_PROMPT_AUTOSAVE_DELAY_MS=10000

# === SMTP 邮件服务（可选） ===
SMTP_HOST=
SMTP_PORT=
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=

# === 阿里云邮件推送（DirectMail） ===
# 前端公开地址，用于拼接邮箱验证链接
APP_PUBLIC_BASE_URL=
# 阿里云访问密钥对
ALIYUN_DM_ACCESS_KEY_ID=
ALIYUN_DM_ACCESS_KEY_SECRET=
# DirectMail 实例所在区域，例如 cn-hangzhou
ALIYUN_DM_REGION_ID=
# DirectMail Endpoint，默认 dm.aliyuncs.com，可留空
ALIYUN_DM_ENDPOINT=
# 管理控制台配置的发信地址（AccountName）
ALIYUN_DM_ACCOUNT_NAME=
# 发信人别名，可选
ALIYUN_DM_FROM_ALIAS=
# 标签名称，可选
ALIYUN_DM_TAG_NAME=
# 是否使用控制台中配置的回信地址（true/false）
ALIYUN_DM_REPLY_TO_ADDRESS=false
# 发信地址类型（0 为随机账号，1 为独立账号）
ALIYUN_DM_ADDRESS_TYPE=0

# === 日志滚动策略 ===
LOG_LEVEL=info
LOG_ENCODING=json
LOG_FILE=
LOG_MAX_SIZE=50
LOG_MAX_BACKUPS=10
LOG_MAX_AGE=7
LOG_COMPRESS=false
